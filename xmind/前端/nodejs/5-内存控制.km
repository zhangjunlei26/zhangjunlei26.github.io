{"root":{"data":{"text":"内存控制","expandState":"expand"},"children":[{"data":{"text":"V8的垃圾回收机制与内存限制","expandState":"expand","note":null,"layout_right_offset":null,"layout":null},"children":[{"data":{"text":"Node与V8：Node在JavaScript上执行直接受益于V8","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"V8的内存限制：64位系统1.4GB，32位0.7GB","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"V8的对象分配：process.memoryUsage()可查询","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"V8的垃圾回收机制","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"V8的内存分代","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"Scavenge算法：Cheney采用复制的方式实现垃圾回收","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"Mark-Sweep &Mark-Compact：标记清除，标记整理","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"Incremental Marking：增量标记","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"查看垃圾回收日志","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"启动时添加--trace_gc参数","layout_right_offset":null,"layout":null},"children":[]}]}]},{"data":{"text":"高效使用内存","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"作用域","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"1.标识符查找","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"2.作用域链","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"3.变量的主动释放","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"闭包：实现外部作用域访问内部作用域中变量的方法","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"内存指标","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"1.查看进程的内存占用：process.memoryUsage()","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"2.查看系统的内存占用：os模块中的totalmen()和freemem(),分别返回总内存和闲置内存","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"堆外内存","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"意味着堆外内存可以突破内存限制的问题","layout_right_offset":null,"layout":null},"children":[]}]}]},{"data":{"text":"内存泄漏","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"原因","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"缓存","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"队列消费不及时","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"作用域未释放","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"解决方案","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"慎将内存当作缓存","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"缓存限制策略","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"缓存的解决方案","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"将缓存转移到外部，减少常驻内存的对象的数量","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"进程之间可以共享缓存","layout_right_offset":null,"layout":null},"children":[]}]}]},{"data":{"text":"关注队列状态","layout_right_offset":null,"layout":null,"expandState":"expand"},"children":[{"data":{"text":"监控队列的长度"},"children":[]},{"data":{"text":"任意异步调用都要包括超时机制"},"children":[]}]}]}]},{"data":{"text":"内存泄漏排查","expandState":"expand"},"children":[{"data":{"text":"v8-profiler：对V8堆内存抓取快照对CPU进行分析"},"children":[]},{"data":{"text":"node-headdump：允许对V8堆内存抓取快照，用于事后分析"},"children":[]},{"data":{"text":"node-mtrace：使用GCC的mtrace工具分析内存泄漏"},"children":[]},{"data":{"text":"node-menwatch：来自Mozilla贡献的模块","expandState":"expand"},"children":[{"data":{"text":"1.stats事件"},"children":[]},{"data":{"text":"2.leak事件"},"children":[]},{"data":{"text":"3.堆内存比较"},"children":[]}]}]},{"data":{"text":"大内存应用","expandState":"expand"},"children":[{"data":{"text":"使用stream模块处理大文件"},"children":[]}]}]},"template":"right","theme":"fresh-pink-compat","version":"1.4.43"}