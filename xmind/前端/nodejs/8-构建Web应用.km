{"root":{"data":{"text":"构建Web应用","expandState":"expand"},"children":[{"data":{"text":"前后端都采用JavaScript的好处","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"无需切换语言环境，在跨域时候，带来额外的好处","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"数据（因为JSON）可以很好地实现跨前后端直接使用","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"一些业务（如模版渲染）不需要纠结是在前端还是后端进行","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"基础功能","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"请求方法的判断","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"GET,POST,HEAD,DELETE,PUT,CONNECT等方法","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"req.method","layout_right_offset":null,"layout":null},"children":[]}]}]},{"data":{"text":"URL的路径解析","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"根据路径进行业务处理掉的应用是静态文件服务器","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"分发场景是根据路径来选择控制器","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"URL中查询字符串解析","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"Node提供了queryString模块用于处理这部分数据","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"var query=url.parse(url.parse(req.url.true).query);","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"Cookie的解析","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"处理步骤","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"1.服务器向客户端发送Cookie","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"2.服务器将Cookie保存","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"3.之后每次浏览器都会将Cookie发向服务器端","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"Set-cookie 参数说明","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"name=value是必须包含的部分","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"path：这个Cookie影响到的路径","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"Expire和Max-Age是用来告知浏览器这个Cookie何时过期","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"HttpOnly告知浏览器不允许通过脚本document.cookie去更改cookie值","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"Secure当为true时，在HTTP中是无效的，只在HTTPS中有效","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"Cookie的性能影响","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"原因：设置Cookie过多，导致报头较大，从而浪费带宽","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"优化","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"减少Cookie的大小","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"为静态主键使用不同的域名","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"减少DNS查询","layout_right_offset":null,"layout":null},"children":[]}]}]},{"data":{"text":"使用Session","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"使用缘由","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"体积过大问题","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"Cookie可以在前后端进行修改，导致数据容易被篡改和伪造","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"Cookie对于敏感数据的保护是无效的","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"Session只保存数据在服务器端，客户无法修改，安全性提高","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"Session数据无须在协议中每次都被传递","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"实现方式","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"基于Cookie来实现用户和数据的映射","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"通过查询字符串来实现浏览器端和服务端数据的对应","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"利用HTTP请求头中的ETag","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"Session与内存","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"问题","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"Node存在内存限制，数据存放到内存中当用户增加，引起性能问题","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"多核CPU启动多个进程，进程之间不能共享内存，用户Session错乱","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"解决","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"Session集中化，工具有Redis、Mencached","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"利用第三方缓存存储Session","layout_right_offset":null,"layout":null},"children":[]}]}]},{"data":{"text":"Session与安全","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"原因：口令还是存在于客户端，还是有被盗用的情况","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"做法：将这个口令通过私钥加密进行签名","expandState":"expand","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"攻击：XSS漏洞","layout_right_offset":null,"layout":null},"children":[]}]}]}]},{"data":{"text":"Basic认证","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"定义：客户端与服务器进行请求时，允许通过用户名和密码实现的一种身份认证方式","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"缺点：虽然经过Base64加密后在网络中传送，但是这几乎是明文，十分危险，一般只有在HTTPS情况下使用","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"保护：加入服务器端随机数来保护认证过程","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"表单数据的解析","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"任意格式数据的上传处理","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"缓存","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"YSlow缓存规则","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"添加Expires或Cache-Control到报文头中","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"配置ETags","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"让Ajax可缓存","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"大多数缓存只应用在GET请求中","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"更新缓存的机制","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"每次发布，路径中跟随Web应用的版本号","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"每次发布，路径中跟随该文件的hash值","layout_right_offset":null,"layout":null},"children":[]}]}]},{"data":{"text":"数据上传","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"表单数据","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"Content-Type：application/x-www-form-urlencoded","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"JSON","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"Content-Type：application/json ","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"XML","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"Content-Type：application/xml","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"使用XML转JSON库","layout_right_offset":null,"layout":null},"children":[]}]}]},{"data":{"text":"附件上传","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"增加表单属性：enctype=\"multipart/form-data\"","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"数据上传与安全","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"内存限制","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"限制上传内容的大小，超出限制，停止接收，并响应404","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"通过流式解析，将数据导入磁盘，Node只保留文件路径等小数据","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"CSRF跨站请求伪造","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"方案：添加随机值的方式","layout_right_offset":null,"layout":null},"children":[]}]}]}]},{"data":{"text":"路由解析","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"文件路径型","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"静态文件","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"URL的路径与网站","expandState":"expand","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"动态文件","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"Web服务器根据文件名后缀去寻找脚本解析器，并传入HTTP请求方式","layout_right_offset":null,"layout":null},"children":[]}]}]},{"data":{"text":"MVC","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"组成","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"控制器（Controller），一组行为的集合","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"模型（Model），数据相关的操作和封装","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"视图（View），视图的渲染","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"工作模式","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"路径解析，根据URL寻找对应的控制器和行为","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"行为调用相关模型，进行数据操作","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"数据操作结束后，调用视图和相关数据进行页面渲染，输出到客户端","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"方式","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"手工映射","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"正则匹配","layout_right_offset":null,"layout":null},"children":[]},{"data":{"text":"参数解析","expandState":"expand","layout_right_offset":null,"layout":null},"children":[]}]},{"data":{"text":"自然映射","expandState":"expand","layout_right_offset":null,"layout":null},"children":[{"data":{"text":"路径按照一种约定的方式自然而然的实现路由","layout_right_offset":null,"layout":null},"children":[]}]}]}]},{"data":{"text":"RESTful:表现层状态转化","layout_right_offset":null,"layout":null,"expandState":"expand"},"children":[{"data":{"text":"设计哲学：将服务器提供的内容实体看作一个资源，并表现在URL上"},"children":[]},{"data":{"text":"请求方法","expandState":"expand"},"children":[{"data":{"text":"查询get()"},"children":[]},{"data":{"text":"修改put()"},"children":[]},{"data":{"text":"删除delete()"},"children":[]},{"data":{"text":"增加post()"},"children":[]}]}]}]},{"data":{"text":"中间件","expandState":"expand"},"children":[{"data":{"text":"目的","expandState":"expand"},"children":[{"data":{"text":"不希望接触到太多细节化的处理"},"children":[]},{"data":{"text":"让开发者能够关注在业务的开发上"},"children":[]}]},{"data":{"text":"异常处理","expandState":"expand"},"children":[{"data":{"text":"Next()接收到异常对象后，交给handle500()处理"},"children":[]}]},{"data":{"text":"中间件与性能","expandState":"expand"},"children":[{"data":{"text":"编写高性能的中间件","expandState":"expand"},"children":[{"data":{"text":"使用高效的方法"},"children":[]},{"data":{"text":"缓存需要重复计算的结果"},"children":[]},{"data":{"text":"避免不必要的计算"},"children":[]}]},{"data":{"text":"合理使用路由","expandState":"expand"},"children":[{"data":{"text":"避免不必要的中间件执行"},"children":[]}]}]}]},{"data":{"text":"页面渲染","expandState":"expand"},"children":[{"data":{"text":"内容响应","expandState":"expand"},"children":[{"data":{"text":"1.MIME"},"children":[]},{"data":{"text":"2.附件下载"},"children":[]},{"data":{"text":"3.响应JSON"},"children":[]},{"data":{"text":"4.响应跳转"},"children":[]}]},{"data":{"text":"视图渲染","expandState":"expand"},"children":[]},{"data":{"text":"模版","expandState":"expand"},"children":[{"data":{"text":"模版语言"},"children":[]},{"data":{"text":"包含模版语言的模板文件"},"children":[]},{"data":{"text":"拥有动态数据的数据对象"},"children":[]},{"data":{"text":"模板引擎","expandState":"expand"},"children":[{"data":{"text":"语法分解，通过正则匹配提取出普通字符和表达式"},"children":[]},{"data":{"text":"处理表达式,将表达式转化成普通的语言表达式"},"children":[]},{"data":{"text":"生成待执行语句"},"children":[]},{"data":{"text":"与数据一起执行，生成最终字符串"},"children":[]}]}]},{"data":{"text":"Bigpipe","expandState":"expand"},"children":[{"data":{"text":"目的：解决重数据页面加载速度问题"},"children":[]},{"data":{"text":"重要的点","expandState":"expand"},"children":[{"data":{"text":"页面布局框架（无数据的）"},"children":[]},{"data":{"text":"后端持续性的数据输出"},"children":[]},{"data":{"text":"前端渲染"},"children":[]}]}]}]}]},"template":"right","theme":"fresh-pink-compat","version":"1.4.43"}