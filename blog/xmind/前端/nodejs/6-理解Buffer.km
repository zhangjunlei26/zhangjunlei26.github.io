{"root":{"data":{"text":"理解Buffer","expandState":"expand"},"children":[{"data":{"text":"Buffer的结构","expandState":"expand"},"children":[{"data":{"text":"模块结构：JavaScript与C++结合的模块"},"children":[]},{"data":{"text":"Buffer对象：类是于 数组，元素是16进制的两位数"},"children":[]},{"data":{"text":"Buffer的内存申请：C++层面申请","expandState":"expand"},"children":[]},{"data":{"text":"Buffer的内存分配：在JavaScript中分配内存采用slab分配机制","expandState":"expand"},"children":[{"data":{"text":"full：完全分配状态"},"children":[]},{"data":{"text":"partial：部分分配状态"},"children":[]},{"data":{"text":"empty：没有被分配状态"},"children":[]}]}]},{"data":{"text":"Buffer的转换","expandState":"expand"},"children":[{"data":{"text":"支持的编码类型","expandState":"expand"},"children":[{"data":{"text":"ASCII"},"children":[]},{"data":{"text":"UTF-8"},"children":[]},{"data":{"text":"UTF-16LE/UCS-2"},"children":[]},{"data":{"text":"Base64"},"children":[]},{"data":{"text":"Binary"},"children":[]},{"data":{"text":"Hex"},"children":[]}]},{"data":{"text":"字符串转Buffer","expandState":"expand"},"children":[{"data":{"text":"new Buffer(str,[encoding]);"},"children":[]}]},{"data":{"text":"Buffer转字符串","expandState":"expand"},"children":[{"data":{"text":"buf.toString([encoding],[start],[end])，默认是UTF-8"},"children":[]}]},{"data":{"text":"Buffer不支持的编码类型","expandState":"expand"},"children":[{"data":{"text":"Buffer.isEncoding(encoding)判断是否支持转换"},"children":[]},{"data":{"text":"借助iconv和iconv-lite两个模块"},"children":[]}]}]},{"data":{"text":"Buffer的拼接","expandState":"expand"},"children":[{"data":{"text":"宽字节编码出现乱码","expandState":"expand"},"children":[{"data":{"text":"原因：文件可读流逐个读取Buffer"},"children":[]}]},{"data":{"text":"使用setEncoding()与string_decoder()","expandState":"expand"},"children":[{"data":{"text":"不能从根本上解决问题","expandState":"expand"},"children":[]}]},{"data":{"text":"正确拼接","expandState":"expand"},"children":[{"data":{"text":"1.用一个数组来存储接收到的Buffer片段记录并记录总长度"},"children":[]},{"data":{"text":"2.调用Buffer.concat()方法合成一个Buffer对象"},"children":[]}]}]},{"data":{"text":"Buffer与性能","expandState":"expand"},"children":[{"data":{"text":"预先转换静态内容为Buffer对象可以提高性能"},"children":[]},{"data":{"text":"文件读取时候有一个highWaterMark设置对性能影响至关重要"},"children":[]},{"data":{"text":"highWaterMark大小会触发系统调用和data事件的次数"},"children":[]},{"data":{"text":"highWaterMark越大读取速度越快"},"children":[]}]}]},"template":"right","theme":"fresh-purple-compat","version":"1.4.43"}